<div class="container">
  <div class="row">
    <h2 style="text-align: center;">Edit User</h2>
    <br />
    <div class="col-md-8 col-md-offset-2">
      <form>
        <div class="form-row">
          <div class="form-group">
            <label for="inputEmail4">Email</label>
            <input
              type="email"
              name="email"
              class="form-control"
              id="inputEmail4"
              placeholder="Email"
              [(ngModel)]="submit_data.email"
            />
          </div>
        </div>
        <div class="form-row" *ngIf="newuser">
          <div class="form-group">
            <label for="password">Password</label>
            <input
              type="password"
              name="password"
              class="form-control"
              id="password"
              [(ngModel)]="password"
            />
          </div>
        </div>

        <div class="form-group">
          <label for="inputUsername">Username</label>
          <input
            type="text"
            name="username"
            class="form-control"
            id="inputUsername"
            placeholder="Username"
            [(ngModel)]="submit_data.username"
          />
        </div>
        <div class="form-group">
          <label for="role">Role</label>
          <span style="float: right;">
            <a
              href="javascript:void(0)"
              (click)="AddRole()"
              style="padding-right: 20px;"
              >Add Role
            </a>
            <a href="javascript:void(0)" (click)="deleteRole()"> Delete Role</a>
          </span>
          <select
            id="role"
            name="role"
            class="form-control"
            [(ngModel)]="submit_data.role"
            (change)="rolechangehanlder()"
          >
            <option
              *ngFor="let role of all_roles.all_roles"
              [ngValue]="role.id"
              >{{ role.name }}</option
            >
          </select>
        </div>

        <label>Permissions</label>
        <div class="form-group">
          <div class="row">
            <div
              class="form-check col-md-4"
              *ngFor="let permission of roles.permissions"
            >
              <input
                class="form-check-input"
                type="checkbox"
                id="{{ permission }}"
                name="{{ permission }}"
                (click)="handlepermission(permission, 0)"
                *ngIf="submit_data.permissions.includes(permission)"
                checked="true"
              />
              <input
                class="form-check-input"
                type="checkbox"
                id="{{ permission }}"
                name="{{ permission }}"
                (click)="handlepermission(permission, 1)"
                *ngIf="!submit_data.permissions.includes(permission)"
              />
              <label class="form-check-label" for="gridCheck">
                {{ permission }}
              </label>
            </div>
          </div>
        </div>
        <br />
        <button type="submit" class="btn btn-primary" (click)="submit()">
          Submit
        </button>
      </form>
    </div>
  </div>
</div>

<div class="modal" id="role_add_modal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Add Role</h5>
        <button
          type="button"
          class="close"
          (click)="closeModal()"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <label>Role</label>
        <input
          type="text"
          name="role_to_add"
          class="form-control"
          id="role_to_add"
          placeholder="Role Name"
          [(ngModel)]="role_to_add"
        />
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" (click)="addRoleSubmit()">
          Add
        </button>
        <button type="button" class="btn btn-secondary" (click)="closeModal()">
          Close
        </button>
      </div>
    </div>
  </div>
</div>
